<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Spanish Fluency Quest - Learn Spanish in 90 days">
    <meta name="theme-color" content="#E07A5F">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>Spanish Fluency Quest</title>
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="assets/icon.svg">
    <link rel="apple-touch-icon" href="assets/icon-192.png">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="app">
        <!-- Install Banner -->
        <div id="installBanner" class="install-banner hidden">
            <span>ğŸ“² Install Spanish Quest for offline learning!</span>
            <button id="installBtn">Install</button>
            <button id="dismissInstall">âœ•</button>
        </div>

        <!-- Navigation -->
        <nav id="mainNav">
            <div class="nav-brand">ğŸŒ® Spanish Quest</div>
            <div class="nav-links">
                <button class="nav-btn active" data-view="home">ğŸ  Home</button>
                <button class="nav-btn" data-view="lessons">ğŸ“š Lessons</button>
                <button class="nav-btn" data-view="cards">ğŸ´ Cards</button>
                <button class="nav-btn" data-view="practice">âœï¸ Practice</button>
            </div>
        </nav>

        <!-- Home View -->
        <main id="homeView" class="view active">
            <div class="home-header">
                <div>
                    <h1>Â¡Hola! ğŸ‘‹</h1>
                    <p>Day <span id="dayCount">1</span> of your Spanish journey</p>
                </div>
                <div class="streak-box">
                    <span class="streak-fire">ğŸ”¥</span>
                    <span id="streakCount">0</span>
                    <span>day streak</span>
                </div>
            </div>

            <div class="stats-row">
                <div class="stat-card">
                    <div class="stat-icon">â­</div>
                    <div class="stat-value" id="totalXP">0</div>
                    <div class="stat-label">XP</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">ğŸ“–</div>
                    <div class="stat-value" id="lessonsCount">0</div>
                    <div class="stat-label">Lessons</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">ğŸ¯</div>
                    <div class="stat-value" id="wordsCount">0</div>
                    <div class="stat-label">Words</div>
                </div>
            </div>

            <div class="progress-section">
                <h3>90-Day Progress</h3>
                <div class="progress-bar">
                    <div class="progress-fill" id="overallProgress"></div>
                </div>
                <p id="progressText">0 of 30 lessons completed</p>
            </div>

            <div class="action-cards">
                <div class="action-card" onclick="App.goTo('lessons')">
                    <span class="action-icon">ğŸ“š</span>
                    <div>
                        <h4>Continue Learning</h4>
                        <p id="nextLessonText">Start Lesson 1</p>
                    </div>
                    <span class="arrow">â†’</span>
                </div>
                <div class="action-card" onclick="App.goTo('cards')">
                    <span class="action-icon">ğŸ´</span>
                    <div>
                        <h4>Review Flashcards</h4>
                        <p>Practice vocabulary</p>
                    </div>
                    <span class="arrow">â†’</span>
                </div>
                <div class="action-card" onclick="App.goTo('practice')">
                    <span class="action-icon">âœï¸</span>
                    <div>
                        <h4>Quick Practice</h4>
                        <p>Test your skills</p>
                    </div>
                    <span class="arrow">â†’</span>
                </div>
            </div>
        </main>

        <!-- Lessons View -->
        <main id="lessonsView" class="view">
            <div class="view-header">
                <h2>Lessons</h2>
                <p>Master Spanish step by step</p>
            </div>
            
            <div class="month-tabs">
                <button class="month-tab active" data-month="1">Month 1</button>
                <button class="month-tab" data-month="2">Month 2</button>
                <button class="month-tab" data-month="3">Month 3</button>
            </div>

            <div id="lessonsList" class="lessons-grid">
                <!-- Populated by JS -->
            </div>
        </main>

        <!-- Lesson Content View (hidden by default) -->
        <main id="lessonContentView" class="view">
            <div class="lesson-header">
                <button id="backToLessons" class="back-btn">â† Back</button>
                <div class="lesson-progress-bar">
                    <div id="lessonProgressFill" class="progress-fill"></div>
                </div>
            </div>
            <div id="lessonContent" class="lesson-content">
                <!-- Populated by JS -->
            </div>
            <div class="lesson-nav">
                <button id="prevSection" class="nav-arrow">â† Prev</button>
                <span id="sectionIndicator">1/1</span>
                <button id="nextSection" class="nav-arrow">Next â†’</button>
            </div>
        </main>

        <!-- Flashcards View -->
        <main id="cardsView" class="view">
            <div class="view-header">
                <h2>Flashcards</h2>
                <p>Build your vocabulary</p>
            </div>

            <div id="deckList" class="decks-grid">
                <!-- Populated by JS -->
            </div>
        </main>

        <!-- Flashcard Study View (hidden by default) -->
        <main id="cardStudyView" class="view">
            <div class="study-header">
                <button id="backToDecks" class="back-btn">â† Back</button>
                <span id="cardsRemaining">0 cards left</span>
            </div>
            
            <div class="flashcard-container">
                <div id="flashcard" class="flashcard">
                    <div class="card-front">
                        <span id="cardFront">Word</span>
                        <button id="playAudio" class="audio-btn">ğŸ”Š</button>
                    </div>
                    <div class="card-back">
                        <span id="cardBack">Translation</span>
                        <p id="cardExample" class="example"></p>
                    </div>
                </div>
                <p id="flipHint" class="flip-hint">Tap to flip</p>
            </div>

            <div id="cardButtons" class="card-buttons hidden">
                <button id="wrongBtn" class="wrong-btn">âœ— Still Learning</button>
                <button id="rightBtn" class="right-btn">âœ“ Got It!</button>
            </div>

            <div class="session-stats">
                <span>âœ“ <span id="correctCount">0</span></span>
                <span>âœ— <span id="wrongCount">0</span></span>
            </div>
        </main>

        <!-- Practice View -->
        <main id="practiceView" class="view">
            <div class="view-header">
                <h2>Practice</h2>
                <p>Test your skills</p>
            </div>

            <div id="practiceMenu" class="practice-modes">
                <button class="mode-card" data-mode="fillblank">
                    <span class="mode-icon">ğŸ“</span>
                    <h4>Fill in the Blank</h4>
                    <p>Complete sentences</p>
                </button>
                <button class="mode-card" data-mode="translate">
                    <span class="mode-icon">ğŸ”„</span>
                    <h4>Translation</h4>
                    <p>English â†” Spanish</p>
                </button>
                <button class="mode-card" data-mode="quiz">
                    <span class="mode-icon">â“</span>
                    <h4>Quick Quiz</h4>
                    <p>Multiple choice</p>
                </button>
            </div>
        </main>

        <!-- Practice Exercise View -->
        <main id="practiceExerciseView" class="view">
            <div class="exercise-header">
                <button id="exitPractice" class="back-btn">â† Back</button>
                <span id="exerciseProgress">1/10</span>
            </div>
            
            <div id="exerciseContent" class="exercise-content">
                <!-- Populated by JS -->
            </div>

            <div id="exerciseFeedback" class="feedback hidden"></div>

            <div class="exercise-buttons">
                <button id="checkAnswer" class="check-btn">Check Answer</button>
                <button id="nextExercise" class="next-btn hidden">Next â†’</button>
            </div>
        </main>

        <!-- Session Complete Modal -->
        <div id="completeModal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-icon">ğŸ‰</div>
                <h2 id="modalTitle">Great Job!</h2>
                <div class="modal-stats">
                    <div><span id="modalScore">0</span> correct</div>
                    <div><span id="modalXP">+0</span> XP</div>
                </div>
                <button id="modalClose" class="primary-btn">Continue</button>
            </div>
        </div>

        <!-- Toast -->
        <div id="toast" class="toast hidden"></div>
    </div>

    <!-- Load Data Files First -->
    <script src="data/lessons-month1.js"></script>
    <script src="data/lessons-month2.js"></script>
    <script src="data/lessons-month3.js"></script>
    <script src="data/lessons.js"></script>
    <script src="data/vocabulary-part1.js"></script>
    <script src="data/vocabulary-part2.js"></script>
    <script src="data/vocabulary-part3.js"></script>
    <script src="data/vocabulary-all.js"></script>
    <script src="data/exercises.js"></script>
    <!-- Main Application -->
    <script src="app.js"></script>
    <script>
        // Register service worker
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/service-worker.js')
                .then(reg => console.log('SW registered'))
                .catch(err => console.log('SW failed:', err));
        }
    </script>
</body>
</html>
